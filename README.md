# k8s-pod-log-generator

This program generates random logs in Kubernetes pods based on the specified configurations.

## Motivation

I wanted a mechanism to stress-test the logging infrastructure for Kubernetes.

## Configuration

The program reads configurations from a YAML file named `config.yaml`. The following configuration options are available:

- `kubeconfig_path`: (Optional) Path to the Kubernetes cluster configuration file. If not provided, the default path will be used.
- `num_k8s_namespaces`: Number of Kubernetes namespaces to create.
- `bytes_per_log_line`: Number of bytes per log line for each pod.
- `kilobytes_per_pod_log`: Size of logs per pod in kilobytes.
- `megabytes_total_log_size`: Total size of logs in megabytes generated by all pods.
- `run_duration_minutes`: Duration for which the tool should run in minutes.
- `namespace_prefix`: (Optional) Prefix for the namespaces created by the tool. Defaults to logger-ns.
- `concurrent_requests`: Controls the number of Kubernetes Pods created simultaneously.

## Usage

```bash
$ cat << EOF > config.yaml
num_k8s_namespaces: 10
bytes_per_log_line: 40
kilobytes_per_pod_log: 200
megabytes_total_log_size: 5
run_duration_minutes: 5
concurrent_requests: 10
EOF
```

```bash
$ go run main.go
2024/04/18 23:33:13 Deleted existing namespace logger-ns-1
2024/04/18 23:33:19 Namespace logger-ns-1 created
2024/04/18 23:33:19 Deleted existing namespace logger-ns-2
2024/04/18 23:33:25 Namespace logger-ns-2 created
2024/04/18 23:33:25 Deleted existing namespace logger-ns-3
2024/04/18 23:33:31 Namespace logger-ns-3 created
2024/04/18 23:33:31 Deleted existing namespace logger-ns-4
2024/04/18 23:33:37 Namespace logger-ns-4 created
2024/04/18 23:33:37 Deleted existing namespace logger-ns-5
2024/04/18 23:33:44 Namespace logger-ns-5 created
2024/04/18 23:33:44 Deleted existing namespace logger-ns-6
2024/04/18 23:33:50 Namespace logger-ns-6 created
2024/04/18 23:33:50 Deleted existing namespace logger-ns-7
2024/04/18 23:33:56 Namespace logger-ns-7 created
2024/04/18 23:33:56 Deleted existing namespace logger-ns-8
2024/04/18 23:34:02 Namespace logger-ns-8 created
2024/04/18 23:34:02 Deleted existing namespace logger-ns-9
2024/04/18 23:34:08 Namespace logger-ns-9 created
2024/04/18 23:34:09 Deleted existing namespace logger-ns-10
2024/04/18 23:34:14 Namespace logger-ns-10 created
2024/04/18 23:34:16 Pod logger-pod-1 in namespace logger-ns-10 created
2024/04/18 23:34:17 Pod logger-pod-4 in namespace logger-ns-10 created
2024/04/18 23:34:17 Pod logger-pod-3 in namespace logger-ns-5 created
2024/04/18 23:34:17 Pod logger-pod-5 in namespace logger-ns-4 created
2024/04/18 23:34:17 Pod logger-pod-2 in namespace logger-ns-9 created
2024/04/18 23:34:18 Pod logger-pod-7 in namespace logger-ns-9 created
2024/04/18 23:34:18 Pod logger-pod-10 in namespace logger-ns-3 created
2024/04/18 23:34:18 Pod logger-pod-8 in namespace logger-ns-2 created
2024/04/18 23:34:18 Pod logger-pod-9 in namespace logger-ns-8 created
2024/04/18 23:34:18 Pod logger-pod-6 in namespace logger-ns-7 created
2024/04/18 23:34:20 Pod logger-pod-13 in namespace logger-ns-2 created
2024/04/18 23:34:20 Pod logger-pod-12 in namespace logger-ns-9 created
2024/04/18 23:34:20 Pod logger-pod-11 in namespace logger-ns-10 created
2024/04/18 23:34:21 Pod logger-pod-14 in namespace logger-ns-7 created
2024/04/18 23:34:21 Pod logger-pod-15 in namespace logger-ns-2 created
2024/04/18 23:34:22 Pod logger-pod-16 in namespace logger-ns-2 created
2024/04/18 23:34:22 Pod logger-pod-17 in namespace logger-ns-2 created
2024/04/18 23:34:22 Pod logger-pod-19 in namespace logger-ns-5 created
2024/04/18 23:34:22 Pod logger-pod-18 in namespace logger-ns-4 created
2024/04/18 23:34:22 Pod logger-pod-20 in namespace logger-ns-10 created
2024/04/18 23:34:28 Total running pods reached the target: 26
...
```

## License

This project is licensed under the MIT License - see the [LICENSE](https://opensource.org/license/mit) for details.
