# k8s-pod-log-generator

This program generates random logs in Kubernetes pods based on the specified configurations.

## Motivation

I wanted a mechanism to stress-test the logging infrastructure for Kubernetes.

## Configuration

The program reads configurations from a YAML file named `config.yaml`. The following configuration options are available:

- `kubeconfig_path`: (Optional) Path to the Kubernetes cluster configuration file. If not provided, the default path will be used.
- `num_k8s_namespaces`: Number of Kubernetes namespaces to create.
- `bytes_per_log_line`: Number of bytes per log line for each pod.
- `kilobytes_per_pod_log`: Size of logs per pod in kilobytes.
- `megabytes_total_log_size`: Total size of logs in megabytes generated by all pods.
- `run_duration_minutes`: Duration for which the tool should run in minutes.
- `namespace_prefix`: (Optional) Prefix for the namespaces created by the tool. Defaults to logger-ns.

## Usage

```bash
$ cat << EOF > config.yaml
num_k8s_namespaces: 2
bytes_per_log_line: 40
kilobytes_per_pod_log: 100
megabytes_total_log_size: 1
run_duration_minutes: 5
EOF
```

```bash
$ go run main.go
2024/04/10 10:03:31 Deleted existing namespace logger-ns1
2024/04/10 10:03:37 Namespace logger-ns1 created
2024/04/10 10:03:37 Deleted existing namespace logger-ns2
2024/04/10 10:03:43 Namespace logger-ns2 created
2024/04/10 10:03:43 Pod logger-pod-0 in namespace logger-ns2 created
2024/04/10 10:03:43 Pod logger-pod-1 in namespace logger-ns1 created
2024/04/10 10:03:43 Pod logger-pod-2 in namespace logger-ns2 created
2024/04/10 10:03:44 Pod logger-pod-3 in namespace logger-ns1 created
2024/04/10 10:03:44 Pod logger-pod-4 in namespace logger-ns1 created
2024/04/10 10:03:45 Pod logger-pod-5 in namespace logger-ns1 created
2024/04/10 10:03:45 Pod logger-pod-6 in namespace logger-ns2 created
2024/04/10 10:03:46 Pod logger-pod-7 in namespace logger-ns2 created
2024/04/10 10:03:47 Pod logger-pod-8 in namespace logger-ns1 created
2024/04/10 10:03:47 Pod logger-pod-9 in namespace logger-ns2 created
2024/04/10 10:03:48 Pod logger-pod-10 in namespace logger-ns2 created
2024/04/10 10:03:53 Total number of running pods reached the target: 11
2024/04/10 10:03:53 Pod logger-pod-11 in namespace logger-ns2 created
2024/04/10 10:03:53 Pod logger-pod-12 in namespace logger-ns2 created
2024/04/10 10:03:53 Pod logger-pod-13 in namespace logger-ns1 created
2024/04/10 10:03:54 Pod logger-pod-14 in namespace logger-ns1 created
2024/04/10 10:03:54 Pod logger-pod-15 in namespace logger-ns2 created
2024/04/10 10:03:55 Pod logger-pod-16 in namespace logger-ns2 created
2024/04/10 10:03:55 Pod logger-pod-17 in namespace logger-ns1 created
2024/04/10 10:03:56 Pod logger-pod-18 in namespace logger-ns2 created
2024/04/10 10:03:57 Pod logger-pod-19 in namespace logger-ns2 created
2024/04/10 10:03:57 Pod logger-pod-20 in namespace logger-ns1 created
2024/04/10 10:03:58 Pod logger-pod-21 in namespace logger-ns2 created
2024/04/10 10:04:03 Total number of running pods reached the target: 11
2024/04/10 10:04:03 Pod logger-pod-22 in namespace logger-ns2 created
...
```

## License

This project is licensed under the MIT License - see the [LICENSE](https://opensource.org/license/mit) for details.
