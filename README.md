# k8s-pod-log-generator

This program generates random logs in Kubernetes pods based on the specified configurations.

## Motivation

I wanted a mechanism to stress-test the logging infrastructure for Kubernetes.

## Configuration

The program reads configurations from a YAML file named `config.yaml`. The following configuration options are available:

- `kubeconfig_path`: (Optional) Path to the Kubernetes cluster configuration file. If not provided, the default path will be used.
- `num_k8s_namespaces`: Number of Kubernetes namespaces to create.
- `bytes_per_log_line`: Number of bytes per log line for each pod.
- `kilobytes_per_pod_log`: Size of logs per pod in kilobytes.
- `megabytes_total_log_size`: Total size of logs in megabytes generated by all pods.

## Usage

```bash
$ cat << EOF > config.yaml
num_k8s_namespaces: 10
bytes_per_log_line: 40
kilobytes_per_pod_log: 100
megabytes_total_log_size: 10
EOF
```

```bash
$ go run main.go
2024/04/05 13:50:16 Namespace logger-ns1 created
2024/04/05 13:50:16 Namespace logger-ns2 created
2024/04/05 13:50:16 Namespace logger-ns3 created
2024/04/05 13:50:16 Namespace logger-ns4 created
2024/04/05 13:50:16 Namespace logger-ns5 created
2024/04/05 13:50:16 Namespace logger-ns6 created
2024/04/05 13:50:16 Namespace logger-ns7 created
2024/04/05 13:50:16 Namespace logger-ns8 created
2024/04/05 13:50:16 Namespace logger-ns9 created
2024/04/05 13:50:16 Namespace logger-ns10 created
2024/04/05 13:50:16 Pod: logger-pod-1 , Namespace: logger-ns4 , Remaining: 102
2024/04/05 13:50:16 Pod: logger-pod-2 , Namespace: logger-ns1 , Remaining: 101
2024/04/05 13:50:16 Pod: logger-pod-3 , Namespace: logger-ns7 , Remaining: 100
2024/04/05 13:50:16 Pod: logger-pod-4 , Namespace: logger-ns4 , Remaining: 99
2024/04/05 13:50:17 Pod: logger-pod-5 , Namespace: logger-ns3 , Remaining: 98
2024/04/05 13:50:17 Pod: logger-pod-6 , Namespace: logger-ns1 , Remaining: 97
2024/04/05 13:50:17 Pod: logger-pod-7 , Namespace: logger-ns1 , Remaining: 96
2024/04/05 13:50:17 Pod: logger-pod-8 , Namespace: logger-ns4 , Remaining: 95
2024/04/05 13:50:17 Pod: logger-pod-9 , Namespace: logger-ns2 , Remaining: 94
2024/04/05 13:50:18 Pod: logger-pod-10 , Namespace: logger-ns2 , Remaining: 93
2024/04/05 13:50:18 Pod: logger-pod-11 , Namespace: logger-ns7 , Remaining: 92
2024/04/05 13:50:18 Pod: logger-pod-12 , Namespace: logger-ns10 , Remaining: 91
2024/04/05 13:50:18 Pod: logger-pod-13 , Namespace: logger-ns1 , Remaining: 90
2024/04/05 13:50:18 Pod: logger-pod-14 , Namespace: logger-ns10 , Remaining: 89
2024/04/05 13:50:19 Pod: logger-pod-15 , Namespace: logger-ns9 , Remaining: 88
...
```

## License

This project is licensed under the MIT License - see the [LICENSE](https://opensource.org/license/mit) for details.
