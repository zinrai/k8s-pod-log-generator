# k8s-pod-log-generator

This program generates random logs in Kubernetes pods based on the specified configurations.

## Motivation

I wanted a mechanism to stress-test the logging infrastructure for Kubernetes.

## Configuration

The program reads configurations from a YAML file named `config.yaml`. The following configuration options are available:

- `kubeconfig_path`: (Optional) Path to the Kubernetes cluster configuration file. If not provided, the default path will be used.
- `num_k8s_namespaces`: Number of Kubernetes namespaces to create.
- `bytes_per_log_line`: Number of bytes per log line for each pod.
- `kilobytes_per_pod_log`: Size of logs per pod in kilobytes.
- `megabytes_total_log_size`: Total size of logs in megabytes generated by all pods.
- `num_workers`: Number of worker threads to use for creating pods.

## Usage

```bash
$ cat << EOF > config.yaml
num_k8s_namespaces: 10
bytes_per_log_line: 40
kilobytes_per_pod_log: 50
megabytes_total_log_size: 3
num_workers: 10
EOF
```

```bash
$ go run main.go
2024/04/07 00:40:22 Namespace logger-ns1 created
2024/04/07 00:40:22 Namespace logger-ns2 created
2024/04/07 00:40:22 Namespace logger-ns3 created
2024/04/07 00:40:22 Namespace logger-ns4 created
2024/04/07 00:40:22 Namespace logger-ns5 created
2024/04/07 00:40:22 Namespace logger-ns6 created
2024/04/07 00:40:22 Namespace logger-ns7 created
2024/04/07 00:40:22 Namespace logger-ns8 created
2024/04/07 00:40:22 Namespace logger-ns9 created
2024/04/07 00:40:22 Namespace logger-ns10 created
2024/04/07 00:40:22 Pod logger-pod-2 in namespace logger-ns10 created
2024/04/07 00:40:22 Remaining jobs: 52
2024/04/07 00:40:22 Pod logger-pod-8 in namespace logger-ns7 created
2024/04/07 00:40:22 Remaining jobs: 52
2024/04/07 00:40:23 Pod logger-pod-1 in namespace logger-ns4 created
2024/04/07 00:40:23 Remaining jobs: 52
2024/04/07 00:40:23 Pod logger-pod-3 in namespace logger-ns6 created
2024/04/07 00:40:23 Remaining jobs: 52
2024/04/07 00:40:23 Pod logger-pod-4 in namespace logger-ns3 created
2024/04/07 00:40:23 Remaining jobs: 52
2024/04/07 00:40:23 Pod logger-pod-5 in namespace logger-ns2 created
2024/04/07 00:40:23 Remaining jobs: 51
2024/04/07 00:40:23 Pod logger-pod-6 in namespace logger-ns8 created
2024/04/07 00:40:23 Remaining jobs: 50
2024/04/07 00:40:24 Pod logger-pod-7 in namespace logger-ns9 created
2024/04/07 00:40:24 Remaining jobs: 49
2024/04/07 00:40:24 Pod logger-pod-9 in namespace logger-ns10 created
2024/04/07 00:40:24 Remaining jobs: 48
2024/04/07 00:40:24 Pod logger-pod-10 in namespace logger-ns4 created
2024/04/07 00:40:24 Remaining jobs: 48
2024/04/07 00:40:24 Pod logger-pod-11 in namespace logger-ns6 created
2024/04/07 00:40:24 Remaining jobs: 47
2024/04/07 00:40:24 Pod logger-pod-12 in namespace logger-ns7 created
2024/04/07 00:40:24 Remaining jobs: 46
...
```

## License

This project is licensed under the MIT License - see the [LICENSE](https://opensource.org/license/mit) for details.
